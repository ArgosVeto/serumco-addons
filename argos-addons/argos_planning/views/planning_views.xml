<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record id="planning_view_form_quickcreate_inherit" model="ir.ui.view">
      <field name="name">planning.slot.form.quickcreate.inherit</field>
      <field name="model">planning.slot</field>
      <field name="inherit_id" ref="planning.planning_view_form_quickcreate"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='employee_id']" position="after">
          <field name="operating_unit_id"/>
          <field name="patient_id"/>
          <field name="partner_id" required="1"/>
          <field name="consultation_type_id"/>
          <field name="more_info"/>
        </xpath>
      </field>
    </record>

    <record id="planning_slot_view_calendar_inherit" model="ir.ui.view">
      <field name="name">planning.slot.view.calendar.inherit</field>
      <field name="model">planning.slot</field>
      <field name="inherit_id" ref="planning.planning_view_calendar"/>
      <field name="arch" type="xml">
        <xpath expr="//calendar" position="attributes">
          <attribute name="color">state</attribute>
        </xpath>
        <xpath expr="//field[@name='employee_id']" position="after">
          <field name="operating_unit_id"/>
        </xpath>
        <field name="name" position="before">
          <field name="state" readonly="1"/>
        </field>
      </field>
    </record>

    <record id="planning_slot_view_tree_inherit" model="ir.ui.view">
      <field name="name">planning.slot.view.tree.inherit</field>
      <field name="model">planning.slot</field>
      <field name="inherit_id" ref="planning.planning_view_tree"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='allocated_hours']" position="after">
          <field name="arrival_time" widget="timer" string="Waiting Time"/>
          <field name="pickup_time" invisible="1"/>
        </xpath>
      </field>
    </record>

    <record id="planning_slot_view_form_inherit" model="ir.ui.view">
      <field name="name">planning.slot.view.form.inherit</field>
      <field name="model">planning.slot</field>
      <field name="inherit_id" ref="planning.planning_view_form"/>
      <field name="arch" type="xml">
        <xpath expr="//div[@role='alert']" position="after">
          <div role="alert" class="alert-warning p-3 text-center" attrs="{'invisible': [('total_due', '=', 0)]}">
            <button name="open_action_followup" type="object" class="btn-link">
              <field name="total_due" widget="monetary"/>
              total due
            </button>
            <span class="align-middle">for this customer.</span>
          </div>
          <header>
            <button name="button_set_to_draft" type="object" class="btn btn-primary" string="Set to Draft"
                    attrs="{'invisible': [('state', 'not in', ['cancel'])]}"/>
            <button name="button_validate" type="object" class="btn btn-primary" string="Validate"
                    attrs="{'invisible': [('state', 'not in', ['draft'])]}"/>
            <button name="button_set_to_waiting" type="object" class="btn btn-primary" string="Waiting"
                    attrs="{'invisible': [('state', 'not in', ['validated'])]}"/>
            <button name="button_progress" type="object" class="btn btn-primary" string="New consultation"/>
            <button name="button_cancel" type="object" string="Cancel"
                    attrs="{'invisible': [('state', 'not in', ['draft', 'validated'])]}"/>
            <field name="state" widget="statusbar"/>
          </header>
        </xpath>
        <field name="is_assigned_to_me" position="before">
          <div class="oe_button_box" name="button_box">
            <button attrs="{'invisible': [('arrival_time', '=', False)]}">
              <field name="arrival_time" widget="timer" class="text-danger h2 pull-right mr-4 font-weight-bold"/>
            </button>
          </div>
        </field>
        <xpath expr="//field[@name='role_id']" position="after">
          <field name="operating_unit_id"/>
          <field name="active" invisible="1"/>
        </xpath>
        <xpath expr="//field[@name='template_autocomplete_ids']" position="before">
          <group>
            <group>
              <field name="source"/>
              <field name="mrdv_event_id"/>
              <field name="mrdv_job_id"/>
            </group>
            <group>
              <field name="patient_id" required="1" context="{'form_view_ref': 'argos_contact.res_partner_view_form',
                   'tree_view_ref': 'argos_contact.res_partner_view_tree', 'default_contact_type': 'patient'}"/>
              <field name="partner_id" required="1"/>
              <field name="consultation_type_id"/>
              <field name="pickup_time" invisible="1"/>
              <field name="more_info"/>
            </group>
          </group>
        </xpath>
        <xpath expr="//sheet" position="after">
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers"/>
            <field name="activity_ids" widget="mail_activity"/>
            <field name="message_ids" widget="mail_thread"/>
          </div>
        </xpath>
      </field>
    </record>

    <record id="planning_role_view_tree_inherit" model="ir.ui.view">
      <field name="name">planning.role.view.tree.inherit</field>
      <field name="model">planning.role</field>
      <field name="inherit_id" ref="planning.planning_role_view_tree"/>
      <field name="arch" type="xml">
        <field name="name" position="after">
          <field name="role_type"/>
          <field name="allday"/>
        </field>
      </field>
    </record>
  </data>
</odoo>