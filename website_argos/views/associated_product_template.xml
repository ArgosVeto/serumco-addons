<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<template id="associated_products">
		<t t-foreach="product.valid_product_template_attribute_line_ids" t-as="ptal">
			<!-- Attributes selection is hidden if there is only one value available and it's not a custom value -->
				
				<!-- Used to customize layout if the only available attribute value is custom -->
				<t t-set="single_and_custom"
				   t-value="len(ptal.product_template_value_ids._only_active()) == 1 and ptal.product_template_value_ids._only_active()[0].is_custom"/>
				<!--<strong t-field="ptal.attribute_id.name" class="attribute_name"/>-->
				
					<ul t-att-data-attribute_id="ptal.attribute_id.id" t-attf-class="list-unstyled #{'d-none' if single_and_custom else ''}">
						<t t-foreach="ptal.product_template_value_ids._only_active()" t-as="ptav">
							<li class="form-group js_attribute_value" style="margin: 0;">
								<label class="col-form-label">
									<div class="custom-control custom-radio custom-control-inline">
										<input type="radio" id="associated-product"
										       t-attf-class="js_variant_change radio_input #{ptal.attribute_id.create_variant}"
										       t-att-checked="ptav in combination"
										       t-att-name="'ptal-%s' % ptal.id"
										       t-att-value="ptav.id"
										       t-att-data-value_id="ptav.id"
										       t-att-data-value_name="ptav.name"
										       t-att-data-attribute_name="ptav.attribute_id.name"
										       t-att-data-is_custom="ptav.is_custom"
										       t-att-data-is_single_and_custom="single_and_custom"/>
										<div class="radio_input_value">
											<label for="associated-product"><span t-field="ptav.name"/></label>
											<span class="badge badge-pill badge-secondary" t-if="ptav.price_extra">
												<!-- see note above about price_extra -->
												<t t-esc="ptav.price_extra > 0 and '+' or '-'"/>
												<span t-esc="abs(ptav.price_extra)" class="variant_price_extra" style="white-space: nowrap;"
												      t-options='{
                                                            "widget": "monetary",
                                                            "from_currency": product.currency_id,
                                                            "display_currency": (pricelist or product).currency_id
                                                        }'/>
											</span>
										</div>
									</div>
								</label>
							</li>
						</t>
					</ul>
			
		</t>
	</template>
</odoo>
