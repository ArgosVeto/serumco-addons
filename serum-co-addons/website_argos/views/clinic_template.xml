<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="clinic_search_box" name="Clinic Searchbox">
        <div role="search">
             <form t-attf-class="o_clinic_searchbar_form input-group" t-att-action="action if action else '/clinic-detail'" method="get">
                <input type="text" name="search" class="search-query form-control oe_search_box " placeholder="Nom/Adresse/Code Postal/Ville…" t-att-value="search"/>
                <div class="se-btn">
                    <button type="submit" class="btn btn-primary oe_search_button" aria-label="Search" title="Search">Rechercher</button>
                </div>  
                 <div class="">
                   <a role="button" target="" href="#" class="btn btn-outline-primary  ml-4">
                       <img src="/website_argos/static/src/img/location.svg" class="img img-fluid mr-2"/><span class="">Autour de moi</span>
                   </a>
                </div>               
            </form>            
        </div>
    </template>

    <template id="clinic_type_search_box" name="clinic Website Searchbox">
        <form class="o_clinic_type_searchbar_form"  t-att-action="action if action else '/clinic-detail'" method="get">
            <div class="col-md-12 search_by_clinic_type">
                <select id="clinic_type" name="clinic_type"  class="form-control o_website_form_input" >
                    <t t-foreach="type_ids" t-as="t">
                        <option>select....</option>
                        <option t-att-value="t.name"
                            t-att-id="t.id" 
                             t-att-class="t.name">
                            <t t-esc="t.name" />
                        </option>
                    </t>
                </select>
            </div>        
        </form>
    </template>

    <template id="service_type_search_tmp" name="Clinic Service Search">
        <t t-set="service" t-value="service_ids" />
        <div t-attf-class="dropdown">
        	<t t-if="service_ids">
	            <t t-set="service" t-value="service_ids"/>
	            <t t-set="ss" t-value="service_ids[0]"/>
	            <a role="button" href="#" class="dropdown-toggle btn ge btn-link" data-toggle="dropdown">
	                <t t-esc="ss and ss.name or ' - '" />
	            </a>
	            <div class="dropdown-menu" role="menu">
	            	<t t-if="service">
		                <t t-foreach="service" t-as="s">
		                    <a role="menuitem" t-attf-href="/clinic-detail?service-type=#{s.sudo().id}" class="dropdown-item">
		                        <span class="switcher_pricelist" 
		                        	t-att-name="s.name"
		                        	t-att-data-pl_id="s.id" 
		                        	t-esc="s.name" />
		                    </a>
		                </t>
	                </t>
	            </div>
	        </t>
        </div>
        
    </template>


    <template id="clinic_type_search_tmp" name="Clinic Type Search">
        <t t-set="type_val" t-value="type_ids" />
        <t t-if="type_val">
        <div class="clinic-type-b">
        	<t t-foreach="type_val" t-as="pl">
	        	<a t-attf-href="/clinic-detail?clinic-type=#{pl.sudo().id}" class="mr-4 badge badge-pill badge-light">
	        		<span t-att-name="pl.name" t-esc="pl.name" />
	        	</a>
        	</t>
		</div>
		</t>
       
    </template>

	<template id="clinic_template" name="Trouver une clinique">
        <t t-call="website.layout">
    		<section class="s_text_block pt32 pb16 s_blog_banner" data-name="Text block" data-oe-id="1373" data-oe-xpath="/data/xpath/section" data-oe-model="ir.ui.view" data-oe-field="arch">
		        <div class="container">
		            <div class="row">
		            	<div class="col-lg-12">
		            		<ol class="breadcrumb">
							    <li class="breadcrumb-item"><a href="/">Accueil</a></li>
							    <li class="breadcrumb-item"> Trouver une clinique</li>
							  </ol>
		            	</div>
		                <div class="col-lg-12 pt16 pb8">
		                	<h1>Trouver une clinique</h1>
		                </div>
		                
		                <div class="col-lg-12 pt16 pb8">
		                	<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
		                    <div class="">
		                        <t t-call="website_argos.clinic_search_box"/>
		                    </div>
		                </div>
		                
		            </div>
		        </div>
	    	</section>
	    	
	    	<section class="s_text_block pt32 pb16 s_blog_banner service-tt">
	    		<div class="container">
	    			<div class="row">

	            		<div class="search_by_service mr-4">
                       		<t t-call="website_argos.service_type_search_tmp"/>
	                	</div>
                        <div class="search_by_type">
                        	<t t-call="website_argos.clinic_type_search_tmp"/>
	                	</div>
                        <div class="open_today">
                          <div class="clinic-type-b">
				        	<a t-attf-href="/clinic-detail?open_today=1" class="mr-4 badge badge-pill badge-light">
				        		<span>OUVERT AUJOURD HUI</span>
				        	</a>
				        	<!-- OUVERT AUJOURD HUI -->
						</div>
                        </div>
                        <div class="criteria search_by_service">
                        	<t t-set="service" t-value="service_ids" />
						        <div t-attf-class="dropdown">
						        	<t t-if="service_ids">
							            <t t-set="service" t-value="service_ids"/>
							            <t t-set="ss" t-value="service_ids[0]"/>
							            <a role="button" href="#" class="dropdown-toggle btn ge btn-link" data-toggle="dropdown">
							               <span>De Criteres</span>
							            </a>
							            <div class="dropdown-menu" role="menu">
							            	<t t-if="service">
								                <t t-foreach="service" t-as="s">
								                    <a role="menuitem" t-attf-href="/clinic-detail?service-type=#{s.sudo().id}" class="dropdown-item">
								                        <span class="switcher_pricelist" 
								                        	t-att-name="s.name"
								                        	t-att-data-pl_id="s.id" 
								                        	t-esc="s.name"/>
								                    </a>
								                </t>
							                </t>
							            </div>
							        </t>
						        </div>
                        </div>
                        <div class="see_map">
                        	<div class="custom-control custom-switch">
							  <input type="checkbox" class="custom-control-input" id="customSwitch1"/>
							  <label class="custom-control-label" for="customSwitch1">Voir La Carte</label>
							</div>
                        </div>

                        <div class="clear-search mt8 ml8">
				        	<a t-attf-href="/clinic-detail?clear_search=1" class="">
				        		<span>CLEAR</span>
				        	</a>
						</div>

                    </div>
                    </div>
                    </section>
                    <section class="s_text_block pt48 pb16">
		    			<div class="container">
		    			<div class="row">
	                    <t t-if="not operating_unit_ids">
	                    	<div class="col-md-12 text-center text-secondary">
	                        	<h3 class="text-secondary">No record found.</h3>
	                        </div>
	                    </t>
                    <t t-if="operating_unit_ids">
                    	<t t-set="clinic_shortlisted" t-value="request.env.user.shortlisted_clinic_partner()"/>
                        	<t t-foreach="operating_unit_ids" t-as="operating_unit">
                        		<div class="col-lg-4 s_col_no_bgcolor pt16 pb16 clinic-grid">
				                    <div class="card bg-white">
				                        <img class="card-img-top" t-att-src="website.image_url(operating_unit, 'clinic_banner')"/>
                                        <t t-if="any(operating_unit.id == cs for cs in clinic_shortlisted)">
                                           <a role="button"  class="btn-primary fav-btn disabled"  t-attf-href="/add-clinic/#{operating_unit.sudo().id}">
                                            	<img src="/website_argos/static/src/img/heart.svg"></img>
                                        	</a>
                                        </t>
                                        <t t-else="">
			                        	  <a role="button"  class="btn btn-primary fav-btn"
			                        	  	 t-attf-href="/add-clinic/#{operating_unit.sudo().id}">
                                            <img src="/website_argos/static/src/img/heart.svg"></img>
                                        	</a> 
                                        </t>
                                       
				                        <div class="card-body">
				                            <h3 class="card-title o_default_snippet_text">
				                            	<a itemprop="display_name"   t-att-content="operating_unit.name" t-field="operating_unit.name" t-attf-href="/clinic-detail/clinic-pratice/#{slug(operating_unit.sudo())}"/>
				                            </h3>

											<t t-set="not_working_time" t-value="operating_unit.clinic_working_status()"/>

				                           <t t-if="not_working_time">
												<i class="fa fa-circle" style="color:#1ade8d;"></i>
												<span>Clinique actuellement ouverte</span>
											</t>
											<t t-else="">
												<i class="fa fa-circle" style="color:red;"></i>
												<span>Clinique actuellement fermée</span>
											</t>
				                            
				                            <div class="clinic-link d-flex">
												<div class="image-l">
													<img src="/website_argos/static/src/img/location.svg"/>
												</div>
												<div class="link">
													<span class="Avenue-Pasteur">
														<span class="street" t-field="operating_unit.street"/><span>, </span><span class="zip" t-field="operating_unit.zip"/><span>, </span><span class="city" t-field="operating_unit.city"/>
													</span>
												</div>
											</div>
				                            
	                                    <div class="">
			                                 <a role="button" target="" t-attf-href="tel:{{operating_unit.phone}}" class="btn btn-outline-primary mb16 mt16 d-none d-xl-inline-block mr-2">
			                                    <img src="/website_argos/static/src/img/phone.svg" class="img img-fluid mr-2"/><span class="">Appeler</span>
			                                </a>
			                                 <a role="button" target="_blank" t-attf-href="/appointment-two?clinic_id=#{operating_unit.sudo().id}"  class="btn btn-primary mb16 mt16 d-none d-xl-inline-block">
			                                    <span class="">Prendre RDV</span>
			                                </a>
			                            </div>	                                    	
			                        </div>
			                    </div>
			                </div>
                        	</t>
                    	</t>
		            </div>
	    			</div>
	    	</section>
        		
                
            <section class="c-tex-block">
            	<div class="container">
            		<div class="row">
		            	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce vitae arcu non sem placerat blandit et at sapien. Praesent tempor et est porta efficitur. Aliquam ac felis non turpis sollicitudin efficitur vel ut leo. Nunc sit amet felis aliquet, aliquam lacus at, aliquet nisl. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse non maximus ligula, ac consequat ligula. Mauris sit amet lectus eleifend nunc facilisis pellentesque. Integer gravida sapien ut sagittis commodo.</p>
						<p>Phasellus eget ex massa. Nunc massa lectus, bibendum sit amet molestie eu, dignissim sit amet ipsum. Nullam aliquet accumsan neque eu lacinia. Cras et vulputate est, et gravida risus. Sed vestibulum magna vitae nulla volutpat suscipit. Mauris imperdiet, metus sit amet vestibulum aliquet, nisl quam condimentum lorem, eget tincidunt velit ante ut dolor. Aliquam et egestas libero, at ullamcorper risus. Mauris vitae tincidunt sapien. Sed at odio non lectus hendrerit egestas. Sed et dui magna. Nunc accumsan vulputate ipsum, sit amet cursus massa porta id.</p>
						
						<p>Duis tellus ligula, viverra vitae purus non, pellentesque dapibus augue. Pellentesque risus justo, aliquet nec bibendum a, elementum eget purus. Fusce viverra sed nunc vitae volutpat. Praesent id metus feugiat, varius neque a, pulvinar tortor. Nam commodo tincidunt augue, in semper ante mattis a. Ut eget nisi risus. Etiam eget hendrerit nisi. Phasellus vitae interdum justo. Nulla quis bibendum velit. Donec dapibus enim ultrices, consectetur justo vitae, ornare justo. Vestibulum eget efficitur leo. Mauris et tempor diam, ut vestibulum lectus. Phasellus commodo tortor et tortor lobortis, eget ultrices odio consequat. Integer non dolor ac massa pharetra hendrerit nec in libero. Curabitur dolor leo, sollicitudin sit amet ante ut, convallis molestie sapien.</p>
						
						<p>Curabitur blandit vulputate enim molestie sollicitudin. Phasellus cursus mauris sit amet libero pellentesque tristique. Sed finibus nisi nec consequat mattis. Etiam finibus, odio vitae semper maximus, magna metus mollis tortor, non porta sem libero ut est. In elit elit, iaculis sed libero ac, dignissim fringilla diam. Aliquam pellentesque hendrerit dictum. Nulla facilisi. Proin lectus tellus, posuere vitae dignissim nec, faucibus sed elit. Cras vitae mollis tortor. Vestibulum nec risus sit amet libero venenatis volutpat eu id.</p>
		            	<div class="oe_structure"></div>
	            	</div>
            	</div>
            </section>
        </t>
	</template>

</odoo>