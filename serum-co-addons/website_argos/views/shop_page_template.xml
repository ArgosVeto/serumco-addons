<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<template id="argos_shop_inherited" inherit_id="website_sale.products">
		<xpath expr="//div[hasclass('oe_website_sale')]" position="attributes">
			<attribute name="class">container oe_website_sale argos_shop</attribute>
		</xpath>
	</template>

	<template id="argos_top_product_pager_inherit" inherit_id="website_sale.products" name="Shop Page Filter" priority="20">
		<xpath expr="//div[hasclass('oe_website_sale')]" position="before">
			<t t-if="category">
				<section class="shop_categ_info s_blog_banner">
					<div class="row m-0 my_content">
	                    <div class="col-lg-12 mb-0 mb-md-4 p-0">
	                        <div class="top-links p-0">
	                            <div class="container">
	                                <ul class="nav navbar-nav flex-row">
	                                    <li class="nav-item mr32">
	                                        <a class="nav-link" href="/">Accueil</a>
	                                    </li>
	                                    <li class="nav-item mr32">
	                                        <a class="nav-link" href="/shop?search=&amp;attrib=&amp;attrib=3-23">Chat</a>
	                                    </li>
	                                    <li class="nav-item mr32">
	                                        <a class="nav-link" href="/shop?search=&amp;attrib=&amp;attrib=3-34">Chien</a>
	                                    </li>
	                                    <li class="nav-item m-0">
	                                        <a class="nav-link" href="/shop?search=&amp;attrib=&amp;attrib=3-59">Nouveaux animaux de compagnie</a>
	                                    </li>
	                                </ul>
	                            </div>
	                        </div>
	                    </div>
	                </div>
					<div class="container">
						<div class="top-breadcrumbs mt8">
		                    <ol class="breadcrumb mb32">
		                    	<li class="breadcrumb-item">
				                    <a href="/">Accueil</a>
				                </li>
		                        <li class="breadcrumb-item">
		                            <a href="/shop">Boutique</a>
		                        </li>
		                        <li t-if="category" class="breadcrumb-item active">
		                            <span><t t-esc="category.name"/></span>
		                        </li>
		                    </ol>
		                </div>
		                <div class="categ-info">
		                	<h1><t t-esc='category.name'/></h1>
		                	<p class="lead"><t t-esc='category.description'/></p>
		                </div>
		                <div class="sub-categories mt32">
		                	<ul class="nav nav-pills flex-row">
								<t t-foreach="category" t-as="c">
							        <t t-if="c.child_id" >
						                <t t-foreach="c.child_id" t-as="c">
						                    <t t-if="not search or c.id in search_categories_ids">
						                        <t t-call="website_sale.categories_recursive" />
						                    </t>
						                </t>
					            	</t>
			                    </t>
		                	</ul>
		                </div>
					</div>
				</section>
			</t>
			<t t-else="">
				<section class="shop_categ_info s_blog_banner pt-0">
					<div class="row m-0 my_content">
	                    <div class="col-lg-12 mb-0 mb-md-4 p-0">
	                        <div class="top-links p-0 bg-transparent">
	                            <div class="container">
	                                <ul class="nav navbar-nav flex-row">
	                                    <li class="nav-item mr32">
	                                        <a class="nav-link" href="/shop-home">Accueil</a>
	                                    </li>
	                                    <li class="nav-item mr32">
	                                        <a class="nav-link chat" href="/shop?search=&amp;attrib=&amp;attrib=3-23">Chat</a>
	                                    </li>
	                                    <li class="nav-item mr32">
	                                        <a class="nav-link" href="/shop?search=&amp;attrib=&amp;attrib=3-34">Chien</a>
	                                    </li>
	                                    <li class="nav-item m-0">
	                                        <a class="nav-link" href="/shop?search=&amp;attrib=&amp;attrib=3-59">Nouveaux animaux de compagnie</a>
	                                    </li>
	                                </ul>
	                            </div>
	                        </div>
	                    </div>
	                </div>
					<div class="container">
						<div class="top-breadcrumbs mt8">
		                    <ol class="breadcrumb m-0">
		                    	<li class="breadcrumb-item">
				                    <a href="/">Accueil</a>
				                </li>
		                        <li class="breadcrumb-item">
		                            <a href="/shop">Boutique</a>
		                        </li>
		                    </ol>
		                </div>
		            </div>
		        </section>
			</t>
			<div class="shop_page_filter oe_website_sale d-none d-md-block">
				<div class="container">
					<div class="d-flex align-items-center">
						<div class="product_filters d-flex align-items-center mr-auto">
							<div class="category-filter">
								<a href="#" class="category-btn dropdown-toggle" data-toggle="dropdown">Category</a>
								<div class="dropdown-menu" role="menu">
									<ul class="nav nav-pills flex-column">
										<t t-foreach="categories" t-as="c">
					                        <li class="nav-item">
									            <a t-att-href="keep('/shop/category/' + slug(c), category=0)" t-attf-class="nav-link #{'active' if c.id == category.id else ''}">
									                <span t-field="c.name"/>
									            </a>
									            
									        </li>
									        <t t-if="c.child_id" >
								                <t t-foreach="c.child_id" t-as="c">
								                    <t t-if="not search or c.id in search_categories_ids">
								                        <t t-call="website_sale.categories_recursive" />
								                    </t>
								                </t>
							            	</t>
					                    </t>
									</ul>
								</div>
							</div>
							<div class="attribute_filter">
								<form class="js_attributes" method="get">
				                    <input t-if="category" type="hidden" name="category" t-att-value="category.id" />
				                    <input type="hidden" name="search" t-att-value="search" />
				                    <ul class="nav nav-pills flex-row">
				                    	<t t-foreach="attributes" t-as="a">
				                    		<li t-if="a.value_ids and len(a.value_ids) &gt; 1" class="nav-item">
			                    				<a href="#" class="attribute-btn dropdown-toggle" data-toggle="dropdown"><span><t t-esc="a.name"/></span></a>
				                                <div class="dropdown-menu" role="menu">
				                                	<t t-if="a.display_type == 'select'">
					                                    <select class="form-control" name="attrib">
					                                        <option value="" />
					                                        <t t-foreach="a.value_ids" t-as="v">
					                                            <option t-att-value="'%s-%s' % (a.id,v.id)" t-esc="v.name" t-att-selected="v.id in attrib_set" />
					                                        </t>
					                                    </select>
					                                </t>
					                                <t t-if="a.display_type == 'radio'">
					                                    <ul class="nav nav-pills flex-column">
					                                        <t t-foreach="a.value_ids" t-as="v">
					                                            <li class="nav-item">
					                                                <label style="margin: 0 20px;" t-attf-class="nav-link#{' active' if v.id in attrib_set else ''}">
					                                                    <input type="checkbox" name="attrib" t-att-value="'%s-%s' % (a.id,v.id)" t-att-checked="'checked' if v.id in attrib_set else None" />
					                                                    <span style="font-weight: normal" t-field="v.name" />
					                                                </label>
					                                            </li>
					                                        </t>
					                                    </ul>
					                                </t>
					                                <t t-if="a.display_type == 'color'">
					                                    <t t-foreach="a.value_ids" t-as="v">
					                                        <label t-attf-style="background-color:#{v.html_color or v.name}" t-attf-class="css_attribute_color #{'active' if v.id in attrib_set else ''}">
					                                            <input type="checkbox" name="attrib" t-att-value="'%s-%s' % (a.id,v.id)" t-att-checked="'checked' if v.id in attrib_set else None" t-att-title="v.name" />
					                                        </label>
					                                    </t>
					                                </t>
				                                </div>
				                    		</li>
				                    	</t>
				                    </ul>
				                </form>
							</div>
						</div>
						<t t-if="attrib_set">
							<div class="product_sort_by_btn clr_fltr ml-auto">
								<a href="/shop" class="btn btn-secondary">
									Clear
								</a>
							</div>
						</t>
						<t t-if="request.website.viewref('website_sale.sort').active">
							<div class="product_sort_by_btn">
								<t t-set="list_price_desc_label">prix décroissant</t>
					            <t t-set="list_price_asc_label">prix croissant</t>
					            <t t-set="name_asc_label">Nom: A à Z</t>
					            <t t-set="name_desc_label">Nom: Z à A</t>
					            <t t-set="website_sale_sortable" t-value="[
					                (list_price_desc_label, 'list_price desc'),
					                (list_price_asc_label, 'list_price asc'),
					                (name_asc_label, 'name asc'),
					                (name_desc_label, 'name desc')
					            ]"/>
					            <t t-set="website_sale_sortable_current" t-value="[sort for sort in website_sale_sortable if sort[1]==request.params.get('order', '')]"/>
					            <div class="dropdown dropdown_sorty_by">
					                <a role="button" href="#" class="dropdown-toggle btn btn-secondary" data-toggle="dropdown">
					                    <span class="d-none d-lg-inline">
					                        <t t-if='len(website_sale_sortable_current)'>
					                            Trier par : <t t-raw='website_sale_sortable_current[0][0]'/>
					                        </t>
					                        <t t-else='1'>
					                            Trier par
					                        </t>
					                    </span>
					                    <i class="fa fa-sort-amount-asc d-lg-none"/>
					                </a>
					                <div class="dropdown-menu dropdown-menu-right" role="menu">
					                    <t t-foreach="website_sale_sortable" t-as="sortby">
					                        <a role="menuitem" rel="noindex,nofollow" t-att-href="keep('/shop', order=sortby[1])" class="dropdown-item">
					                            <span t-raw="sortby[0]"/>
					                        </a>
					                    </t>
					                </div>
					            </div>
							</div>
						</t>
					</div>
				</div>
			</div>
		</xpath>
	</template>

	<template id="product_icons_and_description" inherit_id="website_sale.products_item" name="Argos Products Icon and Description">
		<xpath expr="//div[hasclass('oe_product_image')]" position="inside">
			<div class="icons_and_description">
				<t t-if="product.public_categ_ids">
					<div class="argos_tags">
						<p>
							<t t-foreach="product.public_categ_ids" t-as="categs">
			            		<div class="tag-name">
			            			<a t-att-href="keep('/shop/category/%s' % slug(categs), category=0)">
		            					<t t-esc="categs.name"/>
		            				</a>
			            		</div>
			            	</t>
			            </p>
					</div>
		        </t>
				<div class="argos-product-icons d-none d-md-block">
				</div>
			</div>
		</xpath>
		<xpath expr="//div[hasclass('o_wsale_product_information_text')]" position="before">
			<t t-set="gamne_value" t-value="website.get_product_gamne_values(product)"/>
			<t t-if="gamne_value">
                <div class="argos_categ">
                    <p>
                    	<t t-foreach="gamne_value" t-as="gv">
                    		<a 
            				t-att-href="website.default_category(gv)"
            				role="button">
			               	 	<span class="categ-name">
			               	 		<t t-esc="gv.name"/>
			               	 	</span>
			              	</a>	
                    	</t>
                    </p>
                </div>
            </t>
		</xpath>
	</template>
	<template id="addtocart_btn_inherit" inherit_id="website_sale.products_add_to_cart">
		<xpath expr="//t[@t-if='product_variant_id']" position="replace">
			<t t-if="product_variant_id">
		 		<a href="#" role="button" class="btn btn-link a-submit" aria-label="Shopping cart" title="Shopping cart">
                   <img src="/website_argos/static/src/img/white-cart.png" class="img img-fluid"/>Ajouter
					<span class="text-white ml-1 mr-1 text-bold"> - </span>
					<t t-call="website_sale.product_price" />
                </a>
			</t>
		</xpath>
	</template>
	<template id="argos_shop_wishlist" inherit_id="website_argos.product_icons_and_description">
		<xpath expr="//div[hasclass('argos-product-icons')]" position="inside">
			<t t-if="request.website.viewref('website_sale_wishlist.add_to_wishlist').active">
				<t t-set="in_wish" t-value="product._is_in_wishlist()"/>
	            <t t-set="product_variant_id" t-value="product._get_first_possible_variant_id()"/>
	            <t t-if="product.qty_available > 0">
		            <button t-if="product_variant_id" type="button" role="button" class="btn btn-link o_add_wishlist" t-att-disabled='in_wish and product.qty_available > 0 or None' title="Add to Wishlist" t-att-data-product-template-id="product.id" t-att-data-product-product-id="product_variant_id" data-action="o_wishlist">
		            	<img src="/website_argos/static/src/img/heart.png" class="img img-fluid" alt="Add To Wishlist"/>
		            </button>
	            </t>
	             <t t-if="product.qty_available == 0">
	            <button type="button" class="btn btn-link" data-toggle="modal" data-target="#exampleModal">
				  <img src="/website_argos/static/src/img/heart.png" class="img img-fluid" alt="Add To Wishlist"/>
				</button>
				</t>
			<!-- Modal -->
			<t t-if="product.qty_available > 0">
			<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
			  <div class="modal-dialog" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title" id="exampleModalLabel">Unavailable Products</h5>
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			          <span aria-hidden="true">x</span>
			        </button>
			      </div>
			      <div class="modal-body">
			        This product is not in stock at the moment.
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			      </div>
			    </div>
			  </div>
			</div>
			</t>
	        </t>
		</xpath>
	</template>

	<template id="cart_popover_inherit" inherit_id="website_sale.cart_popover">
		<xpath expr="//a[hasclass('btn','btn-primary')]" position="replace">
			<a role="button" class="btn btn-primary" href="/shop/cart">
               Voir mon panier
             </a>
		</xpath>
	</template>

</odoo>