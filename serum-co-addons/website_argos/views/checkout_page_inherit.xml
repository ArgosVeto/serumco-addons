<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<template id="product_cart_inherit" inherit_id="website_sale.cart_lines" name="Product Cart Inherit">
	 	<xpath expr="//t[@t-call='website_sale.cart_line_product_link']" position="before">
		 	<t t-foreach="line.product_id.product_tmpl_id.public_categ_ids" t-as="categ">
		        <p class="category-name"><t t-esc="categ.name"/></p>
		    </t>
	    </xpath>

	    <xpath expr="//thead//tr" position="replace">
	    	<th class="td-img">Articles</th>
            <th></th>
            <th class="text-center td-qty">Quantité</th>
            <th class="text-center td-price">Prix</th>
            <th class="text-center td-action"></th>
	    </xpath>
	</template>

    
    <template id="clinic_load" name="Clinic load">
        <t t-if="clinic_ids">
            <div class="row">
                <t t-foreach="clinic_ids" t-as="cli">
                    <div class="col-md-4 m16">
                        <div><strong><t t-esc="cli.display_name"></t></strong></div>

                        <t t-if="cli.street">
                            <span class="street" t-field="cli.street" />
                        </t>
                        <t t-if="cli.street2">
                            <span>, </span>                            
                             <span class="street2" t-field="cli.street2" />
                        </t>
                        <t t-if="cli.zip">
                            <span>, </span>                            
                            <span class="zip" t-field="cli.zip" />
                        </t>
                        <t t-if="cli.city">
                            <span>, </span>                            
                            <span class="city" t-field="cli.city" />
                        </t>
                        <t t-if="cli.state_id">
                            <span>, </span>                            
                            <span class="state" t-field="cli.state_id.name" />
                        </t>
                        <t t-if="cli.country_id">
                            <span>, </span>                            
                            <span class="country" t-field="cli.country_id.name" />
                        </t>
                    </div>
                    <div class="col-md-6 m16">
                        <t t-if="cli.calendar_id">
                        <div class="content mt8 mb8">
                            <strong><span>Horaires d’ouverture</span></strong>
                        </div>
                        <t t-set="get_short_employee_slot" t-value="cli.calendar_id.get_short_employee_slot(cli.calendar_id)"/>
                        <t t-if="get_short_employee_slot">
                            <div class="row">
                                <t t-foreach="get_short_employee_slot" t-as="wt">
                                    <div class="col-lg-4">
                                        <span class="Lun-Mar-Mer-Jeu-Copy">
                                            <t t-esc="wt" />
                                        </span>
                                    </div>
                                    <div class="col-lg-4 text-center">
                                        <span class="h00---12h30-9h00---copy">
                                            <t t-esc="get_short_employee_slot[wt]['start_time']" />
                                        </span>
                                    </div>
                                    <div class="col-lg-4 text-center">
                                        <span class="h00---12h30-9h00---copy">
                                            <t t-esc="get_short_employee_slot[wt]['end_time']" />
                                        </span>
                                    </div>
                                </t>
                            </div>
                        </t>
                    </t>
                    </div>
                    <div class="col-md-2 mt16"> 
                        <a  t-att-href="'/update-delivery/%s' % slug(cli)"   class="btn btn-primary float-right p-0" role="button" title="Edit this address" aria-label="Edit this address"><i class='fa fa-edit'/>Add</a>
                    </div>

                </t>
            </div>
        </t>
    </template>
    
	<template id="product_cart_btn" inherit_id="website_sale.cart" name="Product Cart btn">
		<xpath expr="//div[hasclass('oe_cart')]" position="replace">
			<div class="col-12">
				<h1 class="text-primary cart-page-heading">Votre panier</h1>
			</div>
    	 	<div class="col-12 col-xl-8 oe_cart">
                <div class="row">
                    <div class="col-lg-12">
                        <div t-if="abandoned_proceed or access_token" class="mt8 mb8 alert alert-info" role="alert"> <!-- abandoned cart choices -->
                            <t t-if="abandoned_proceed">
                                <p>Your previous cart has already been completed.</p>
                                <p t-if="website_sale_order">Please proceed your current cart.</p>
                            </t>
                            <t t-if="access_token">
                                <p>This is your current cart.</p>
                                <p>
                                    <strong><a t-attf-href="/shop/cart/?access_token=#{access_token}&amp;revive=squash">Click here</a></strong> if you want to restore your previous cart. Your current cart will be replaced with your previous cart.</p>
                                <p>
                                    <strong><a t-attf-href="/shop/cart/?access_token=#{access_token}&amp;revive=merge">Click here</a></strong> if you want to merge your previous cart into current cart.
                                </p>
                            </t>
                        </div>
                        <t t-call="website_sale.cart_lines" />


                        <div class="">
                        </div>
                        <div class="clearfix" />
                        <a role="button" href="/shop" class="continue-btn btn btn-secondary d-none d-xl-inline-block">
                            <img src="/website_argos/static/src/img/cart-right.svg" class="img img-fluid mr8" />
                            <span class="">Continuer vos achats</span>
                        </a>
                        <a role="button" t-if="website_sale_order and website_sale_order.website_order_line" class="btn btn-primary float-right d-none d-xl-inline-block" href="/shop/checkout">
                            <span class="">Passer au paiement</span>
                            <span class="fa fa-long-arrow-right" />
                        </a>
                        <div class="oe_structure" id="oe_structure_website_sale_cart_1"/>
                    </div>
                </div>
            </div>
	    </xpath>
	</template>

    <template id="product_cart_coupon" inherit_id="website_sale.coupon_form" name="Product Cart Coupon">
        <xpath expr="//div[hasclass('input-group')]" position="replace">
            <div class="input-group w-100">
                <input name="promo" class="form-control" type="text" placeholder="J'ai un code promo" t-att-value="website_sale_order.pricelist_id.code or None"/>
                <div class="input-group-append">
                    <a href="#" role="button" class="btn btn-secondary a-submit">OK</a>
                </div>
            </div>
        </xpath>
    </template>

    <template id="product_cart_process_btn" inherit_id="website_sale.short_cart_summary" name="Product Cart Process Button">
        <xpath expr="//a" position="replace">
            <a role="button" t-if="website_sale_order and website_sale_order.website_order_line" class="btn btn-primary float-right d-none d-xl-inline-block" href="/shop/checkout">
                <span>Passer au paiement</span>
            </a>
        </xpath>
    </template>

    <template id="product_cart_progress" inherit_id="website_sale.wizard_checkout" name="Product Cart Progress">
        <xpath expr="//div[hasclass('progress-wizard')]" position="replace">
            <div class="progress-wizard">
                <a class="no-decoration" t-att-href="step&gt;=10 and '/shop/cart' or '#'">
                  <div id="wizard-step10" t-att-class="'progress-wizard-step %s' % (step == 10 and 'active' or step&gt;10 and 'complete' or 'disabled')">
                    <div class="progress-wizard-bar d-none d-md-block"/>
                    <span class="progress-wizard-dot d-none d-md-inline-block"></span>
                    <div class="progress-wizard-num">
                        <span class="number">1</span>
                        <span class="fa fa-check d-none"></span>
                    </div>
                    <div class="progress-wizard-steplabel">
                        <p class="heading">Panier</p>
                        <p>Vérifier la commande</p>
                    </div>
                  </div>
                </a>
                <a class="no-decoration" t-att-href="step&gt;=20 and '/shop/checkout' or '#'">
                  <div id="wizard-step20" t-att-class="'progress-wizard-step %s' % (step == 20 and 'active' or step&gt;20 and 'complete' or 'disabled')">
                    <div class="progress-wizard-bar d-none d-md-block"/>
                    <span class="progress-wizard-dot d-none d-md-inline-block"></span>
                    <div class="progress-wizard-num">
                        <span class="number">2</span>
                        <span class="fa fa-check d-none"></span>
                    </div>
                    <div class="progress-wizard-steplabel">
                        <p class="heading">Livraison</p>
                        <p>Vos coordonnées</p>
                    </div>
                  </div>
                </a>
                <a class="no-decoration" t-att-href="step&gt;=40 and '/shop/payment' or '#'">
                  <div id="wizard-step40" t-att-class="'progress-wizard-step %s' % (step == 40 and 'active' or step&gt;40 and 'complete' or 'disabled')">
                    <div class="progress-wizard-bar d-none d-md-block"/>
                    <span class="progress-wizard-dot d-none d-md-inline-block"></span>
                    <div class="progress-wizard-num">
                        <span class="number">3</span>
                        <span class="fa fa-check d-none"></span>
                    </div>
                    <div class="progress-wizard-steplabel">
                        <p class="heading">Paiement</p>
                        <p>Confirmer la commande</p>
                    </div>
                  </div>
                </a>
            </div>
        </xpath>
    </template>

    <template id="product_cart_right_column" inherit_id="website_sale.cart_summary" name="Product Cart Right Column">
        <xpath expr="//div[hasclass('card')]" position="replace">
            <div class="card border-0">
                <div class="card-body p-xl-0">
                    <div class="toggle_summary d-xl-none">
                        <b>Your order: </b> <span t-field="website_sale_order.amount_total" t-options='{"widget": "monetary", "display_currency": website_sale_order.pricelist_id.currency_id}'/>
                        <span class='fa fa-chevron-down fa-border float-right' role="img" aria-label="Details" title="Details"></span>
                    </div>
                    <div t-if="not website_sale_order or not website_sale_order.website_order_line" class="alert alert-info">
                        Your cart is empty!
                    </div>
                    <div class="toggle_summary_div d-none d-xl-block">
                        <table class="table table-striped table-sm" id="cart_products" t-if="website_sale_order and website_sale_order.website_order_line">
                            <thead>
                                <tr>
                                    <th class="border-top-0 td-img">Articles</th>
                                    <th class="border-top-0"></th>
                                    <th class="border-top-0 text-right pr-0 td-price">Prix</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="website_sale_order.website_order_line" t-as="line">
                                    <td class='' colspan="2" t-if="not line.product_id.product_tmpl_id"></td>
                                    <td class='td-img text-center' t-if="line.product_id.product_tmpl_id">
                                        <span t-field="line.product_id.image_128" t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded o_image_64_max'}" />
                                    </td>
                                    <td class='td-product_name' t-if="line.product_id.product_tmpl_id">
                                        <div>
                                            <strong t-field="line.name_short" />
                                        </div>
                                        <div class="quantity">
                                            <p>
                                                <span>Qté : </span>
                                                <span t-esc="line.product_uom_qty"/>
                                            </p>
                                        </div>
                                    </td>
                                    <td class="text-center td-price">
                                        <span t-field="line.price_reduce_taxexcl" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" groups="account.group_show_line_subtotals_tax_excluded" />
                                        <span t-field="line.price_reduce_taxinc" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" groups="account.group_show_line_subtotals_tax_included" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <t t-call="website_sale.total">
                            <t t-set='redirect' t-value="redirect or '/shop/payment'"></t>
                        </t>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="product_cart_payment" inherit_id="website_sale.payment" name="Product Cart payment">
        <xpath expr="//t[@t-set='back_button_txt']" position="replace">
            <t t-set="back_button_txt">Retour</t>
        </xpath>
        <xpath expr="//t[@t-set='back_button_icon_class']" position="replace">
            <t t-set="back_button_icon_class" t-value="'fa fa-long-arrow-left'"/>
        </xpath>
        <xpath expr="//t[@t-set='back_button_class']" position="replace">
            <t t-set="back_button_class" t-value="'btn btn-secondary continue-btn'"/>
        </xpath>
         <xpath expr="//t[@t-set='submit_txt']" position="replace">
            <t t-set="submit_txt">Valider la commande</t>
        </xpath>
         <xpath expr="//t[@t-set='back_button_class']" position="replace">
            <t t-set="back_button_class" t-value="'btn btn-secondary continue-btn'"/>
        </xpath>
        <xpath expr="//div[@id='payment_method']//h3" position="replace">
            <h3 class="mb24">Payment</h3>
        </xpath>
    </template>


    <template id="product_cart_address" inherit_id="website_sale.address" name="Product Cart address">
        <xpath expr="//form[hasclass('checkout_autoformat')]" position="attributes">
            <attribute name="class" separator=" " add="contact-argos" />
        </xpath>

        <xpath expr="//div[hasclass('d-flex')]" position="replace">
            <div class="d-flex justify-content-between mt48 align-items-center">
                <a role="button" t-att-href="mode == ('new', 'billing') and '/shop/cart' or '/shop/checkout'" class="btn btn-secondary continue-btn">
                    <img src="/website_argos/static/src/img/cart-right.svg" class="img img-fluid mr8" />
                    <span>Back</span>
                </a>
                <a role="button" href="#" class="btn btn-primary a-submit a-submit-disable a-submit-loading">
                    <span>Next</span>
                    <span class="fa fa-long-arrow-right" />
                </a>
            </div>
        </xpath>
    </template>

    <template id="product_cart_confirmation" inherit_id="website_sale.confirmation" name="Product Cart confirmation">
        <xpath expr="//h1" position="replace">
             <div class="col-12">
                <t t-call="website_sale.wizard_checkout">
                    <t t-set="step" t-value="41" />
                </t>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('col-12','col-xl')]" position="attributes">
            <attribute name="class">col-12 col-xl-8</attribute>
        </xpath>
        <xpath expr="//div[hasclass('oe_cart')]" position="replace">
            <div class="argos_confirm">
                <h3 class="text-primary mb32">Votre commande est confirmée !</h3>
                <h6 class="text-gamma mb16">Lorem ipsum dolor sit</h6>
                <p class="mb32">Molestiae voluptas consequatur qui ut dolorum soluta nulla eligendi. Autem non quis commodi doloremque doloremque in commodi. Enim architecto rerum nihil. Earum commodi eveniet qui.</p>
 
                <p class="pb48 mb48">Impedit qui quia tempora aperiam. Dolores ea natus omnis sit commodi. Ut quaerat non minima ducimus est consequatur hic tempore eius. Commodi nulla dolorum veritatis consequatur velit. Optio sit id natus ut qui. Unde ut consectetur voluptatibus ea recusandae enim quo.</p>

            </div>
            <div class="col-md-12 mt-4">
                <a class="btn btn-primary float-right" href="/">Retour à la page d'accueil</a>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('col-12','col-xl-auto')]" position="inside">
            <t t-if="order.operating_unit_id">
                <div class=" mt32 click-collect">
                    <div class="mb32">
                        <div class="title">
                            <h2>LIVRAISON : CLICK &amp; COLLECT</h2>
                        </div>
                        <div class="row mt24 ma-clinique">
                            <div class="col-md-6 col-6">
                                <img class="img img-fluid" id="banner-img" t-att-src="website.image_url(order.operating_unit_id, 'clinic_banner')"/>
                            </div>
                            <div class="col-md-6 col-6">
                                <h2 class="company"><t t-esc="order.operating_unit_id.name"/></h2>
                                <p>
                                    <span class="street"><t t-esc="order.operating_unit_id.street"/></span>
                                    <span>,</span>
                                    <span class="zip"><t t-esc="order.operating_unit_id.zip"/></span>
                                    <span>, </span>
                                    <span class="city"><t t-esc="order.operating_unit_id.city"/></span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mb32">
                        <a role="button" id="buy_now" class="btn btn-outline-primary" href="/clinic-detail">
                            <span>Voir la fiche clinique</span>
                        </a>
                    </div>
                </div>
            </t>
        </xpath>
        <xpath expr="//div[hasclass('col-12','col-xl-auto')]" position="attributes">
            <attribute name="class">col-12 col-xl-4</attribute>
        </xpath>
    </template>
</odoo>