<?xml version="1.0" encoding="UTF-8"?>
<odoo>

        <record id="bi_medical_patients_view_form" model="ir.ui.view">
            <field name="name">medical.patients.view.form</field>
            <field name="model">medical.patient</field>
            <field name="arch" type="xml">
                <form string="patient">
                    <sheet>
                        <group colspan="1" col="6" string="Main Info">

                            <field name="patient_id" domain="[('id','=', -1)]"
                                context="{'default_is_patient':1, 'search_default_is_patient': 1, 'default_is_pet': 1, 'search_default_is_pet':1}" />
                            <field name="name" />
                            <field name="date_of_birth" />
                            <newline />
                            <field name="sex" required="1" />
                            <field name="age" />
                            <newline />
                            <separator colspan="4"
                                string="Patient Critical Information" />
                            <newline />
                            <field colspan="6" name="critical_info"
                                nolabel="1" />
                        </group>
                        <group string="Picture" colspan="1" col="1"
                            rowspan="1">
                            <field name="photo" nolabel="1"
                                img_width="120" img_height="120" width="120"
                                height="120" widget="image" />
                            <newline />
                        </group>
                        <newline />
                        <notebook>
                            <page string="General Information">
                                <notebook>
                                    <page string="Main">
                                        <group
                                            string="Patient General Information">
                                            <group>
                                                <field name="height" />
                                                <field name="weight" />
                                                <field name="color" />
                                            </group>
                                            <group>
                                                <field name="breed_id" />
                                                <field name="pet_type_id" />
                                                <field name="family_code_id" />
                                            </group>
                                            <group>
                                                <field name="blood_type" />
                                                <field name="rh" />
                                                <field name="receivable" />
                                            </group>
                                            <group>
                                                <field
                                                    name="current_insurance_id" />
                                                <field
                                                    name="partner_address_id"
                                                    required="1"
                                                    context="{'default_is_owner':1, 'search_default_is_owner':1, 'default_is_person':1, 'search_default_person':1 }" />
                                                <field name="doctor_id" />
                                                <field name="patient_status" />
                                            </group>

                                        </group>
                                    </page>

                                </notebook>
                            </page>
                            <!-- PATIENT DISEASES -->
                            <page string="Diseases">

                                <field name="diseases_ids"
                                    nolabel="1" widget="one2many_list" />
                                <field name="patient_psc_ids"
                                    nolabel="1" widget="one2many_list" />

                            </page>
                            <page string="Evaluations">
                                <field name="evaluation_ids" />

                            </page>
                            <page string="Lifestyle">
                                <notebook>
                                    <page string="Diet and Excersice">

                                        <group >
                                            <group colspan="8"
                                                col="4"
                                                string="Physical Excersise">
                                                <field name="excercise" />
                                                <field
                                                    name="excercise_minutes_day" class="oe_inline"/>
                                            </group>
                                            <group colspan="8"
                                                col="4" string="Sleep">
                                                <field name="sleep_hours" />
                                                <field
                                                    name="sleep_during_daytime" />
                                            </group>
                                            <newline />
                                            <group colspan="8" cols="4" string="Diet info">
                                                <group>
                                                    <field name="number_of_meals" />
                                                    <field name="eats_alone" />
                                                </group>
                                                <group>
                                                    <field name="soft_drinks" />
                                                    <field name="salt" />
                                                </group>
                                            </group>
                                            <group colspan="8"
                                                string="Lifestyle Information">
                                                <field name="lifestyle_info"
                                                    nolabel="1" />
                                            </group>
                                        </group>

                                    </page>


                                    <page string="Addictions">
                                        <notebook>
                                            <page string="Main">
                                                <group colspan="8"
                                                    col="4">
                                                    <field name="smoking" />
                                                    <field
                                                        name="smoking_number" />
                                                    <field name="ex_smoker" />
                                                    <field
                                                        name="second_hand_smoker" />
                                                    <field
                                                        name="age_start_smoking" />
                                                    <field
                                                        name="age_quit_smoking" />
                                                    <field name="drug_usage" />
                                                    <field name="drug_iv" />
                                                    <field
                                                        name="ex_drug_addict" />
                                                    <field
                                                        name="age_start_drugs" />
                                                    <field
                                                        name="age_quit_drugs" />
                                                </group>
                                            </page>
                                            <page string="Alcohol">
                                                <group colspan="8"
                                                    col="4">
                                                    <field name="alcohol" />
                                                    <field name="ex_alcohol" />
                                                    <field
                                                        name="age_start_drinking" />
                                                    <field
                                                        name="age_quit_drinking" />
                                                    <field
                                                        name="alcohol_beer_number" />
                                                    <field
                                                        name="alcohol_wine_number" />
                                                    <field
                                                        name="alcohol_liquor_number" />
                                                </group>
                                                <field name="cage_ids">
                                                    <tree editable="bottom">
                                                        <field
                                                            name='evaluation_date'
                                                            string="Date" />
                                                        <field
                                                            name='cage_c'
                                                            string="Hard To Cut Down" />
                                                        <field
                                                            name='cage_a'
                                                            string="Angry With Critics" />
                                                        <field
                                                            name='cage_g'
                                                            string="Guilt" />
                                                        <field
                                                            name='cage_e'
                                                            string="Eye-Opener" />
                                                        <field
                                                            name='cage_score'
                                                            string="CAGE Score " />
                                                    </tree>
                                                </field>
                                            </page>
                                            <page string="Recreational Drugs">

                                                <group colspan="4"
                                                    col="10">

                                                    <field
                                                        colspan="10"
                                                        name="drugs_ids"
                                                        nolabel="1"
                                                        widget="many2many" />
                                                </group>
                                            </page>
                                        </notebook>
                                    </page>
                                    <page string="Sexuality">
                                        <group colspan="4" col="6">
                                            <field name="sexual_preferences" />
                                            <field name="sexual_partners" />
                                            <field
                                                name="sexual_partners_number" />
                                            <field
                                                name="first_sexual_encounter" />
                                            <field name="sexual_practices" />
                                            <field name="anticonceptive" />
                                        </group>
                                        occupation
                                        <group colspan="2"
                                            string="Extra info about the patient sexuality">
                                            <field nolabel="1"
                                                name="sexuality_info" />
                                        </group>
                                    </page>

                                    <page string="Safety">
                                        <group colspan="4" col="8"
                                            string="Drive and Home Safety">
                                            <field name="motorcycle_rider" />
                                            <field name="helmet" />
                                            <field name="traffic_laws" />
                                            <field name="car_revision" />
                                            <field name="car_seat_belt" />
                                            <field name="car_child_safety" />
                                            <field name="home_safety" />
                                        </group>

                                    </page>

                                </notebook>
                            </page>

                            <page string="Gyneco / Obs"
                                attrs="{'invisible':[('sex','=','m')]}">
                                <notebook>
                                    <page string="Gyneco">
                                        <group colspan="10" col="10"
                                            string="General">
                                            <field name="fertile" />
                                            <field name="menarche" />
                                            <field name="menopausal" />
                                            <field name="menopause" />
                                        </group>

                                        <group colspan="8" col="8"
                                            string="Menstrual History">
                                            <field
                                                name="menstrual_history_ids"
                                                context="{'name':active_id}"
                                                nolabel="1">
                                                <tree editable="top"
                                                    string="Menstrual History">
                                                    <field
                                                        name="evolution_id" />
                                                    <field
                                                        name="evoultion_date" />
                                                    <field name="lmp" />
                                                    <field name="lmp_length" />
                                                    <field name="is_regular" />
                                                    <field
                                                        name="dysmenorrhea" />
                                                    <field name="frequency" />
                                                    <field name="volume" />
                                                </tree>
                                            </field>
                                        </group>
                                    </page>

                                    <page string="Screening">
                                        <group colspan="10" col="10"
                                            string="General">
                                            <field
                                                name="breast_self_examination" />
                                            <field name="mammography" />
                                            <field name="pap_test" />
                                            <field name="pap_test_last_date" />
                                            <field name="colposcopy" />
                                        </group>

                                        <group colspan="8" col="8"
                                            string="Mammography History">
                                            <field
                                                name="mammography_history_ids"
                                                context="{'name':active_id}"
                                                nolabel="1">
                                                <tree editable="top"
                                                    string="Mammography History">
                                                    <field
                                                        name="evolution_id" />
                                                    <field
                                                        name="evolution_date" />
                                                    <field
                                                        name="last_mamography_date" />
                                                    <field name="result" />
                                                </tree>
                                            </field>
                                        </group>
                                    </page>

                                    <page string="PAP/Colpo">
                                        <group colspan="3"
                                            string="PAP smear History">
                                            <field name="pap_history_ids"
                                                context="{'name':active_id}"
                                                colspan="4" nolabel="1">
                                                <tree editable="top"
                                                    string="PAP smear History">
                                                    <field
                                                        name="evolution_id" />
                                                    <field
                                                        name="evolution_date" />
                                                    <field name="result" />
                                                    <field name="remark" />
                                                </tree>
                                            </field>
                                        </group>
                                        <group colspan="3"
                                            string="Colposcopy History">
                                            <field
                                                name="colposcopy_history_ids"
                                                context="{'name':active_id}"
                                                colspan="4" nolabel="1">
                                                <tree editable="top"
                                                    string="Colposcopy History">
                                                    <field
                                                        name="evolution_id" />
                                                    <field
                                                        name="evolution_date" />
                                                    <field name="result" />
                                                    <field name="remark" />
                                                </tree>
                                            </field>
                                        </group>
                                    </page>
                                    <page string="Obstetrics">
                                        <group colspan="8" col="8">
                                            <field name="gravida" />
                                            <field name="premature" />
                                            <field name="stillbirths" />
                                            <field name="abortions" />
                                        </group>

                                        <field name="pregnancy_history_ids">
                                            <tree>
                                                <field name="gravida" />
                                                <field name="lmp" />
                                                <field
                                                    name="current_pregnency" />
                                                <field
                                                    name="pregnancy_due_date" />
                                                <field name="warn" />
                                                <field name="igur" />
                                                <field name="monozygotic" />

                                            </tree>
                                        </field>

                                    </page>
                                </notebook>
                            </page>



                            <page string="Socioeconomics">
                                <notebook>
                                    <page string="Main">
                                        <group colspan="4">
                                            <group col="6"
                                                colspan="6">
                                                <field name="socionomics" />
                                                <field name="education" />
                                                <field name="housing" />

                                            </group>
                                            <group col="6"
                                                colspan="6">
                                                <field name="works" />
                                                <field name="hours_outside" />
                                                <field name="hostile_area" />
                                            </group>
                                            <field colspan="6"
                                                name="notes" />
                                        </group>
                                    </page>
                                    <page string="Infrastructure">
                                        <group col="8" colspan="8"
                                            string="Infrastructure">
                                            <field name="sewers" />
                                            <field name="water" />
                                            <field name="trash" />
                                            <field name="electricity" />
                                            <field name="gas" />
                                            <field name="telephone" />
                                            <field name="television" />
                                            <field name="internet" />
                                        </group>
                                    </page>
                                    <page string="Family">
                                        <group col="6" colspan="6"
                                            string="Family APGAR">
                                            <field name="fam_apgar_help" />
                                            <field
                                                name="fam_apgar_discussion" />    
                                            <field name="fam_apgar_decisions" /> 
                                            <field
                                                name="fam_apgar_timesharing" />   
                                            <field name="fam_apgar_affection" /> 
                                            <field name="fam_apgar_score" />
                                        </group>
                                        <group col="8" colspan="8"
                                            string="Other Family Issues">
                                            <field name="single_parent" />
                                            <field name="domestic_violence" />
                                            <field name="working_children" />
                                            <field name="teenage_pregnancy" />
                                            <field name="sexual_abuse" />
                                            <field name="drug_addiction" />
                                            <field name="school_withdrawal" />
                                            <field name="prison_past" />
                                            <field name="prison_current" />
                                            <field name="relative_in_prison" />
                                        </group>
                                    </page>
                                </notebook>
                            </page>

                            <page string="Surgeries">
                                <group colspan="4">
                                    <field name="surgery_ids"
                                        nolabel="1" />
                                </group>
                            </page>
                            <page string="Genetic Risks">
                                <group colspan="4">
                                    <field name="genetic_risks_ids"
                                        nolabel="1" readonly="1" />
                                </group>
                                <group colspan="4">
                                    <field name="family_history_ids"
                                        nolabel="1" readonly="1" />
                                </group>
                            </page>

                            <page string="Lab Tests">
                                <group colspan="4">
                                    <field name="lab_test_ids"
                                        nolabel="1" readonly="1" />
                                </group>
                            </page>
                            <page string="Medications"> 
                            <group colspan="4"> 
                                <field name="medication_ids" nolabel="1" >
                                    <tree>
                                        <field name="medicament_id" />
                                        <field name="indication_pathology_id" />
                                        <field name="start_treatment" />
                                        <field name="end_treatment" />
                                        <field name="is_active" />
                                        <field name="doctor_id" />
                                    </tree>
                                </field>
                             </group> 
                            </page>
                            <page string="Vaccinations"> 
                            <group colspan="4"> 
                                <field name="medical_vaccination_ids" nolabel="1" >
                                    <tree>
                                        <field name="product_id" />
                                        <field name="dose" />
                                        <field name="date" />
                                        <field name="observations" />
                                    </tree>
                                </field> 
                            </group> 
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="bi_medical_patients_view_tree" model="ir.ui.view">
            <field name="name">medical.patients.view.tree</field>
            <field name="model">medical.patient</field>
            <field name="arch" type="xml">
                <tree string="Patient Information">
                    <field name="name" />
                    <field name="lastname" />
                    <field name="patient_id" />
                    <field name="sex" />
                    <field name="date_of_birth" />
                    <field name="doctor_id" />
                </tree>
            </field>
        </record>

        <record id="bi_action_medical_patients" model="ir.actions.act_window">
            <field name="name">Patients</field>
            <field name="res_model">medical.patient</field>
            <field name="binding_view_types">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="menu_medical_patient_code" action="bi_action_medical_patients"
            string="Patients" parent="menu_patients" sequence="1" />
</odoo>